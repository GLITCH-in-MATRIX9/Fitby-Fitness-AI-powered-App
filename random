{
  "name": "user_login_workflow",
  "description": "Workflow for verifying login, logging, and sending notifications",
  "version": 1,
  "tasks": [
    {
      "name": "verify_login",
      "taskReferenceName": "verify",
      "type": "HTTP",
      "inputParameters": {
        "http_request": {
          "uri": "https://your-api.com/auth/verify",
          "method": "POST",
          "headers": {
            "Content-Type": "application/json"
          },
          "body": {
            "email": "${workflow.input.credentials.email}",
            "password": "${workflow.input.credentials.password}"
          }
        }
      }
    },
    {
      "name": "decision_on_login",
      "taskReferenceName": "decision_login",
      "type": "DECISION",
      "inputParameters": {
        "status": "${verify.output.response.body.status}"
      },
      "caseValueParam": "status",
      "decisionCases": {
        "success": [
          {
            "name": "log_success",
            "taskReferenceName": "log_success",
            "type": "HTTP",
            "inputParameters": {
              "http_request": {
                "uri": "https://your-api.com/logs",
                "method": "POST",
                "headers": {
                  "Content-Type": "application/json"
                },
                "body": {
                  "userId": "${verify.output.response.body.user.id}",
                  "event": "login_success",
                  "time": "${workflow.input.time}"
                }
              }
            }
          },
          {
            "name": "send_login_mail",
            "taskReferenceName": "notify",
            "type": "HTTP",
            "inputParameters": {
              "http_request": {
                "uri": "https://your-api.com/notifications/send",
                "method": "POST",
                "headers": {
                  "Content-Type": "application/json"
                },
                "body": {
                  "to": "${verify.output.response.body.user.email}",
                  "subject": "New Login Detected",
                  "message": "Hi ${verify.output.response.body.user.name}, you just logged in!"
                }
              }
            }
          }
        ],
        "failure": [
          {
            "name": "log_failure",
            "taskReferenceName": "log_fail",
            "type": "HTTP",
            "inputParameters": {
              "http_request": {
                "uri": "https://your-api.com/logs",
                "method": "POST",
                "headers": {
                  "Content-Type": "application/json"
                },
                "body": {
                  "email": "${workflow.input.credentials.email}",
                  "event": "login_failed",
                  "time": "${workflow.input.time}"
                }
              }
            }
          }
        ]
      }
    }
  ],
  "inputParameters": [
    "credentials",
    "time"
  ],
  "schemaVersion": 2
}